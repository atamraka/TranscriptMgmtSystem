<!DOCTYPE html>
<html ng-app="" ng-controller="myCtrl">
<link rel="stylesheet" href="Styles/Style.css">
<body contenteditable="true">
<h3>Select some text </h3>
<div id="container" contenteditable="true" ng-mouseup="showSelectedText()">
   <textarea id="fileTextArea" row="50" cols="60"  contenteditable="true">
    You will hear a telephone conversation between a customer and an agent at a company
    which ships large boxes overseas.
    Good morning Packham’s Shipping Agents. Can I help you?
    Oh yes, I’m ringing to make enquiries about sending a large box, a container,
    back home to Kenya from the UK.
    Yes, of course. Would you like me to try and find some quotations for you?
    Yes, that’d be great. Thank you.
    Well first of all, I need a few details from you.
    Fine.
    Can I take your name?
    It’s Jacob Mkere.
    Can you spell your surname, please?
    Yes, it’s M-K-E-R-E.
    Is that ‘M’ for mother?
    Yes.
    Thank you, and you say that you will be sending the box to Kenya?
    That’s right.
    And where would you like the box picked up from?
    From college, if possible.
    Yes, of course. I’ll take down the address now.
    It’s Westall College.
    Is that W-E-S-T-A-L-L?
    Yes, ... college.
    Westall College. And where’s that?
    Listening sample task – Form completion (to be used with IELTS Listening Recording 1)
    It’s Downlands Road, in Bristol.
    Oh yes, I know it. And the postcode?
    It’s BS8 9PU.
    Right ... and I need to know the size.
    Yes, I’ve measured it carefully and it’s 1.5m long ...
    Right.
    0.75m wide ...
    OK.
    And it’s 0.5m high or deep.
    Great. So I’ll calculate the volume in a moment and get some quotes for that. But
    first can you tell me, you know, very generally, what will be in the box?
    Yes there’s mostly clothes.
    OK. [writing down]
    And there’s some books.
    OK. Good. Um ... Anything else?
    Yes, there’s also some toys.
    OK and what is the total value, do you think, of the contents?
    Well the main costs are the clothes and the books – they’ll be about £1500 but
    then the toys are about another two hundred – so I’d put down £1700.
        </textarea>
</div>
<br/>
<h3>Selected Text</h3>


<div ng-bind="selectedText"></div>
<script>
    function myCtrl($scope,$timeout) {

        $scope.showSelectedText = function() {
            $scope.selectedText =  $scope.getSelectionText();
        };

        $scope.getSelectionText = function() {
            var text = "";
            if (window.getSelection) {
             text = window.getSelection().toString();

             } else if (document.selection && document.selection.type != "Control") {
             text = document.selection.createRange().text;

             }
           /* var txtarea =document.getElementById("fileTextArea");
            var start = txtarea.selectionStart;
            // obtain the index of the last selected character
            var finish = txtarea.selectionEnd;
            // obtain the selected text
            var sel = txtarea.value.substring(start, finish);
            text=sel;*/

            return text;
        };
    }

    function play() {
        var audio = document.getElementById("audio1");
        audio.play();
    };
    function pause() {
        var audio =document.getElementById("audio1");
        audio.pause();
        alert(audio.currentTime);
    };

    function timeOut(){
        setTimeout(function(){timeOut()}, 1000);
    };

   function PlayBackWithBookmark(){
     var audio = document.getElementById("audio1");
     var durationtime=audio.duration;
  /* $http.get(localhost:8080/audiokey/file1  )*/
     var i=0;
     audio.play();


       do{
   /*/!*  /!*if(audio.currentTime=1.658157) {
             /!*alert("highlight");*!/
         }*!/!*!/
*/
         i=i+1;
         setTimeout(function(){ timeOut() }, 1000.000);

        var value= Math.round(audio.currentTime);

       // alert(value);



            var txtarea = document.getElementById("fileTextArea");
            var len = txtarea.value.length;
            var sel = txtarea.value.substring(30, 45);
            var replace =  sel.toUpperCase();

           txtarea.value = txtarea.value.substring(0, 30) + replace + txtarea.value.substring(45, len);

               //txtarea.value = txtarea.value.substring(0, 75) + replace + txtarea.value.substring(85, len);



     }while(i<durationtime)

    /* /!*  1.658157
     2.715604
     3.562064
     overseas--8.311188*!/*/



     };

    /*function highLightText() {




       /!* sel.setAttribute(
                "style",
                "background-color: yellow; display: inline;"
        );*!/

    };
*/
</script>
<h1>______________________________________________________________</h1>

<audio id="audio1" controls>
    <source src="http://www.ielts.org/files/Listening%20Sample%20Task%20Type%201.mp3"></source>
    Your browser isn't invited for super fun audio time
</audio>
<button onclick="play();">Play</button>
<button onclick="pause();">Pause</button>
<button onclick="PlayBackWithBookmark();">PlayBookMark</button>
<br>

<script src="bower_components/angular/angular.js"></script>

</body>
</html>